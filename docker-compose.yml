x-common-env: &common-env
  environment:
    CONFIG_SERVER_HOST=config-server
    CONFIG_SERVER_USER=configuser
    CONFIG_SERVER_PASS=configpass
    SPRING_EUREKA_HOST=discovery-server
    SPRING_EUREKA_PASSWORD=eurekapass123
    SPRING_EUREKA_PORT=8761
    MARIADB_DATASOURCE_URL=jdbc:postgresql://db_client:3306/db_client
    MARIADB_DATASOURCE_USERNAME=db_client
    MARIADB_DATASOURCE_PASSWORD=apppassword
    SPRING_CONFIG_HOST=localhost
    SPRING_PROFILES_ACTIVE=default


services:
  db_client:
    image: mariadb:12.0.2
    container_name: db_client
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: 12345678
      MYSQL_DATABASE: db_client
      MYSQL_USER: db_client
      MYSQL_PASSWORD: apppassword
    ports:
      - "3306:3306"

  db_transaction:
    image: postgres:17.0-alpine3.20
    container_name: db_transaction
    restart: always
    environment:
      POSTGRES_DB: db_transaction
      POSTGRES_USER: db_transaction
      POSTGRES_PASSWORD: apppassword
    ports:
      - "5436:5436"
    expose:
      - 5436
    command: -p 5436


